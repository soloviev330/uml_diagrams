hw_8
@startuml
title Жизненный цикл банковской карты

[*] --> Оформление


Оформление --> Активация: Карта выпущена


state "Активная" as Active {
  [*] --> Обычная
  
  Обычная --> Премиум: [Повышение статуса клиента]
  Премиум --> Обычная: [Понижение статуса клиента]
  
  note right of Обычная
    Стандартный
    функционал карты
  end note
  
  note right of Премиум
    Расширенные
    привилегии
  end note
}


Active --> Заблокированная: [Попытка мошенничества]\n/ Блокировка карты
Active --> Заблокированная: [Подозрительная транзакция]
Active --> Заблокированная: [Запрос клиента]
Active --> Утерянная: [Карта утеряна]
Active --> Просроченная: after(срок действия истек)\n/ Автоматическая деактивация


state Заблокированная {
  [*] --> Временная_блокировка
  Временная_блокировка --> Проверка_службой_безопасности: [Требуется расследование]
  Проверка_службой_безопасности --> Снятие_блокировки: [Угроза не подтверждена]
  Проверка_службой_безопасности --> Окончательная_блокировка: [Мошенничество подтверждено]
}


Снятие_блокировки --> Active: [Разблокировка]\n/ Восстановление доступа
Окончательная_блокировка --> Закрыта: [Выпуск новой карты]


Утерянная --> Active: [Карта найдена]\n/ Восстановление
Утерянная --> Закрыта: [Выпуск новой карты]\n/ Перевыпуск


Просроченная --> Закрыта: [Клиент не обратился]\n/ Уничтожение карты
Просроченная --> Оформление: [Запрос на перевыпуск]\n/ Новая карта


Закрыта --> [*]


note right of Active
  Карта полностью функциональна.
  Доступны все операции.
  Составное состояние с подтипами.
end note

note left of Заблокированная
  Временное приостановление
  операций для защиты средств.
end note

note bottom of Просроченная
  Автоматический переход
  по таймауту после истечения
  срока действия карты.
end note

note right of Утерянная
  Карта физически утрачена.
  Операции невозможны.
end note
@enduml
